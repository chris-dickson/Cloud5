<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Cloud5</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">
    <link href="test/live/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="test/live/test.js"></script>
    <script src="dist/Cloud5.js"></script>
    <script src="test/fillWindow/gatsby.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                        Cloud5
                    </a>
                </li>
                <li>
                    <a href="#overview">Getting Started</a>
                </li>

                <li>
                    <a href="#gettingstarted">Features</a>
                </li>
                <li>
                    <a href="#examples">Examples</a>
                    <a href="#basicexample" class="subnav">Basic</a>
                    <a href="#events" class="subnav">Events</a>
                    <a href="#customLayouts" class="subnav">Custom Layouts</a>
                    <a href="#masking" class="subnav">Masking</a>
                </li>
                <li>
                    <a href="#demo">Demo</a>
                </li>
                <li>
                    <a href="#contact">Contact</a>
                </li>
                <li>
                    <a href="#licence">Licence</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <h1>Cloud5</h1>
                        <h4>Cloud5 is an entirely client-side Javascript library for rendering beautiful word clouds using HTML5 Canvas.</h4>

                        <h3 id="overview">Overview</h3>
                        <p>Unlike other word cloud libraries that rely on a server, Cloud5 runs entirely within your web browser.   No backend necessary.</p>
                        <p>Features:</p>
                        <ul>
                            <li>Custom Layouts</li>
                            <li>Mouse Events</li>
                            <li>Image Masking</li>
                            <li>Mobile Support</li>
                        </ul>

                        <h3 id="gettingstarted">Getting Started</h3>
                        <p>You can <a href="dist/Cloud5.min.js">download the minified Javascript library here</a> or the <a href="dist/Cloud5.js">unminified version.</a></p>
                        <p>To build from source code, please visit the <a href="https://github.com/chris-dickson/Cloud5">Cloud5 Github Page</a> and follow the instructions listed.</p>
                        <p>To start generating word clouds, simply include the source file in your webpage.</p>

                        <h3 id="examples">Examples</h3>
                        <h4 id="basicexample">Basic Example</h4>
                        <p>We will be using the text from <a href="http://www.americanrhetoric.com/speeches/jfkinaugural.htm">John F. Kennedy's Inaugural Address in 1961</a>.  By default, we strip punctuation from the text string and convert all strings to lowercase.</p>
                        <pre class="prettyprint">
var text = // a big text string

var cloud = new Cloud5()
    .canvas(document.getElementById('myCanvas'))
    .text(text)
    .generate();
                        </pre>
                        <img src="img/sample1.png" width="100%" alt="JFK's Inaugural Address">



                        <h4 id="events">Events</h4>
                        <pre class="prettyprint">
var text = // a big text string
var cloud = new Cloud5()
    .canvas(canvas)
    .width(800)
    .height(400)
    .font('Helvetica')
    .minFontSize(10)
    .maxFontSize(250)
    .background('#0055bb')
    .text(text)
    .textFilters([/\[[0-9]*\]/g,/[\t+\[\]]/g])
    .color(['#44bbcc','#88dddd','#bbeeff'])
    .onWordOver(function(word) {
        // handle mousing over a word
    })
    .onWordOut(function(word) {
        // handle mousing out of a word
    })
    .onWordClick(function(word) {
        // handle clicking a word
    });
                        </pre>

                        <p>The <code>textFilters</code> function takes an array of regular expressions.   They are executed in the other provided and will remove all strings that match.  In the above
                        example, we use it to remove citations from Wikipedia text, as well as special characters.</p>
                        <p>The <code>color</code> function can accept a single color string, an array of them, or a function.   The function takes an object as an argument that shows the position, word (string) and frequency of the word being rendered.   The function can return a color
                        string and that word will be rendered the given color.</p>
                        <p>An example using the above setup and the article on the Preamble to the Constitution:</p>
                        <img src="img/sample2.png" width="100%">

                        <h4 id="customLayouts">Custom Layouts</h4>
                        <p>It is possible to define custom layout functions in Cloud5.   Here, we write a function that
                        performs a radial layout by starting in the center of the canvas and slowly increases the radius
                         where we're allowed to place words.   The result is words clustering around the center of the canvas.</p>
                        <pre class="prettyprint">
var customLayouter = function(words,renderInfo,width,height) {
    var that = this;
    var startX = width/2;
    var startY = height/2;
    var maxRadius = Math.min(width,height) * 0.5;

    words.forEach(function(word) {

        var placed = false;
        for (var i = 10; i > 0 && !placed; i--) {
            var minRadius = maxRadius * (1/i);

            for (var t = 0; t <= 1 && !placed; t+= (1/50)) {
                var searchRadius = minRadius + (maxRadius-minRadius)*t;
                var theta = Math.random() * Math.PI * 2;
                var r = Math.random() * searchRadius;

                // Apply a shift no more than the width of word to avoid bunching on the right
                var shiftX = -(Math.random() * renderInfo[word].bb.width);
                var shiftY = -(Math.random() * renderInfo[word].bb.height);

                renderInfo[word].x = startX + r * Math.sin(theta) + shiftX;
                renderInfo[word].y = startY + r * Math.cos(theta) + shiftY;

                if (that.fits(renderInfo[word])) {
                    placed = true;
                    that.place(word,renderInfo[word]);
                }
            }
        }
        if (!placed) {
            renderInfo[word].x = -1;
            renderInfo[word].y = -1;
        }
    });
};

...
cloud.layout(customLayouter);
                        </pre>
                        <p>The following two word clouds were generated using the above layout algorithm
                        using the transcript from the <a href="http://en.wikipedia.org/wiki/Just_watch_me">"Just Watch Me"</a> interview.   <a href="http://faculty.marianopolis.edu/c.belanger/quebechistory/docs/october/watchme.htm">[Source]</a>.   We generate one for
                        the interviewers and one for Pierre Trudeau.</p>
                        <img src="./img/cbc.png" width="45%" style="float:left;">
                        <img src="./img/pet.png" width="45%" style="float:right">
                        <div style="clear:both"/>
                        <p>Left: CBC Reporters, Right: Pierre Trudeau</p>

                        <h4 id="masking">Masking</h4>
                        <p>We can provide an image that will act as a mask for the word cloud.   Any pixel that has it's alpha > 0 will be a valid word location.</p>
                        <pre class="prettyprint">
var cloud = new Cloud5()
    .canvas(canvas)
    .text(canada)
    .font('Helvetica')
    .minFontSize(5)
    .color(['#ff0000','#ee0000','#dd0000','#cc0000','#bb0000','#aa0000','#990000'])
    .mask('./mask.png',function() {
        cloud.generate();
    });
                        </pre>
                        <p>The mask used above followed by the word cloud generated from the <a href="http://en.wikipedia.org/wiki/Canada">Wikipedia article on Canada</a></p>
                        <img src="img/mask.png" width="100%">
                        <img src="img/canada.png" width="100%">


                        <h3 id="demo">Demo</h3>
                            <p>Enter some text in the text area below and click generate to see a word cloud.</p>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="control">
                                        <label>Text:</label>
                                        <textarea id="myText"></textarea>
                                    </div>
                                    <div class="control">
                                        <button id="generate">Generate</button>
                                        <button id="sample">Sample Text</button>
                                        <button id="download">Download</button>
                                    </div>
                                </div>
                            </div>

                            <div id="controls" class="row">
                                <div class="col-md-6">
                                    <div class="control">
                                        <label>Min Font Size (px)</label><input class="textInput" type="number" id="minFontSize" value="10" min="1">
                                    </div>
                                    <div class="control">
                                        <label>Max Font Size (px)</label><input class="textInput" type="number" id="maxFontSize" value="100" min="1">
                                    </div>
                                    <div class="control">
                                        <label>Font Family</label><input class="textInput" id="fontFamily" value="Calibri">
                                    </div>
                                    <div class="control">
                                        <label>Max Words (0 = No Limit)</label><input class="textInput" id="maxWords" value="300" min="0">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div id="colorsContainer" class="control">
                                        <label>Colors</label>
                                        <button id="addColor">+</button>
                                        <input type="color" value="#000000" class="color">
                                    </div>


                                    <div class="control">
                                        <label>Background</label><input id="background" type="color" value="#ffffff">
                                    </div>
                                    <div class="control">
                                        <label>Hover</label>
                                        <span class="wordLabel" id="mouseOverWord"></span>
                                    </div>
                                    <div class="control">
                                        <label>Clicked</label>
                                        <span class="wordLabel" id="mouseClickWord"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12 canvas-container">
                                    <canvas id="myCanvas" width="500" height="300"></canvas>
                                </div>
                            </div>


                        <h3 id="contact">Contact</h3>
                        <p><a href="mailto:cloudfive.js@gmail.com">cloudfive.js@gmail.com</a></p>

                        <h3 id="licence">Licence</h3>
                        <p>Cloud5 is licenced under the MIT Licence</p>

                        <p>Copyright (c) 2015 Chris Dickson</p>

                        <p>Permission is hereby granted, free of charge, to any person obtaining a copy
                        of this software and associated documentation files (the "Software"), to deal
                        in the Software without restriction, including without limitation the rights
                        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                        copies of the Software, and to permit persons to whom the Software is
                        furnished to do so, subject to the following conditions:</p>

                        <p>The above copyright notice and this permission notice shall be included in
                        all copies or substantial portions of the Software.</p>

                        <p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
                        THE SOFTWARE.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    livedemo();
    </script>

</body>

</html>
