!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Cloud5=t()}}(function(){return function t(e,n,o){function r(s,h){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e){var n=t("./util"),o=t("./textbitmap"),r=function(t){this._canvas=null,this._words=null,this._bitmap=null,this._renderInfo=null,this._textBitmapper=null,n.extend(this,t)};r.prototype=n.extend(r.prototype,{_initialize:function(){var t={width:this._canvas.width,height:this._canvas.height};this.debug&&(t.debug=!0),this._textBitmapper=new o(t),this._renderInfo={},this._bitmap=n.createArray(this._canvas.width,this._canvas.height);for(var e=0;e<this._canvas.width;e++)for(var r=0;r<this._canvas.height;r++)this._bitmap[e][r]=!1},_hit:function(t,e){var n=null,o=this,r=Object.keys(this._renderInfo).filter(function(n){var r=o._renderInfo[n],i=r.x+r.bb.offsetX,s=r.y+r.bb.offsetY,h=i+r.bb.width,a=s+r.bb.height;return t>=i&&h>=t&&e>=s&&a>=e?!0:!1});return r.sort(function(t,e){var n=o._renderInfo[t].bb,r=o._renderInfo[e].bb,i=n.width*n.height,s=r.width*r.height;return i-s}),r.length>0&&(n=r[0]),n},canvas:function(t){return t?(this._canvas=t,this):this._canvas},words:function(t){return t?(this._words=t,this):this._words},onWordOver:function(t){return this._onWordOver=t,this},onWordOut:function(t){return this._onWordOut=t,this},onWordClick:function(t){return this._onWordClick=t,this},layout:function(){function t(t,e,n){t.fillStyle="white",t.fillRect(0,0,e,n);var o=this;Object.keys(this._renderInfo).forEach(function(e){var n=o._renderInfo[e];void 0!==n.x&&-1!==n.x&&void 0!==n.y&&-1!==n.y&&(t.font=n.fontSize+"px "+n.fontFamily,t.fillStyle="red",t.strokeStyle="green",t.fillText(e,n.x,n.y),t.strokeRect(n.x+n.bb.offsetX,n.y+n.bb.offsetY,n.bb.width,n.bb.height))})}function e(t){var e=t.offsetX,n=t.offsetY,o=r._hit(e,n);o?(r._onWordOver&&r._onWordOver(o),u=o):u&&(r._onWordOut&&r._onWordOut(u),u=null)}function o(t){var e=t.offsetX,n=t.offsetY,o=r._hit(e,n);o&&r._onWordClick&&r._onWordClick(o)}if(this._initialize(),this._renderInfo={},this._words){var r=this,i=Number.MAX_VALUE,s=0;Object.keys(this._words).forEach(function(t){i=Math.min(r._words[t],i),s=Math.max(r._words[t],s)});var h=Object.keys(this._words).sort(function(t,e){return r._words[e]-r._words[t]});this.maxWords>0&&h.length>this.maxWords&&(h=h.splice(0,this.maxWords));var a=this.minFontSize||10,l=this.maxFontSize||200;h.forEach(function(t){var e=(r._words[t]-i)/(s-i),o=n.step(a,l,e),h=r._textBitmapper.create(t,o,r.font||"Calibri");r._renderInfo[t]=h,r._renderInfo[t].count=r._words[t],r._renderInfo[t].minCount=i,r._renderInfo[t].maxCount=s})}h.forEach(function(e){var n=!1,o=100;this.debug&&t(r._canvas.getContext("2d"),r._canvas.width,r._canvas.height);for(var i=r._renderInfo[e];!n&&o>0;){var s=Math.floor(Math.random()*r._canvas.width),h=Math.floor(Math.random()*r._canvas.height);if(i.x=s,i.y=h,r._textBitmapper.fits(i,r._bitmap)){n=!0;for(var a=i.bitmap.length,l=i.bitmap[0].length,u=0;a>u;u++)for(var d=0;l>d;d++){var f=i.x+i.bb.offsetX+u,c=i.y+i.bb.offsetY+d;i.bitmap[u][d]&&(r._bitmap[f][c]=e)}}else o--}n||(i.x=-1,i.y=-1)});var u=null;return this._canvas.onmousemove=e,this._canvas.onclick=o,r._renderInfo}}),e.exports=r},{"./textbitmap":5,"./util":6}],2:[function(t,e){var n=t("./util"),o=function(t){this.writeLog=t,this.logs=[]};o.prototype=n.extend(o.prototype,{push:function(t){this.writeLog&&this.logs.push({label:t,time:Date.now()})},pop:function(){if(this.writeLog){for(var t=this.logs.length,e=this.logs.pop(),n="",o=0;o<t.length;o++)n+="	";var r=Date.now(),i=r-e.time;n+=e.label+":"+i+"ms",console.log(n)}},_millisecondsToString:function(t){var e,n=36e5,o=6e4,r=1e3,i=0,s=0,h=0;return t>=n&&(h=Math.floor(t/n)),t=h>0?t-h*n:t,t>=o&&(s=Math.floor(t/o)),t=s>0?t-s*o:t,t>=r&&(i=Math.floor(t/r)),t=i>0?t-i*r:t,e=h>0?(h>9?h:"0"+h)+":":"00:",e+=s>0?(s>9?s:"0"+s)+":":"00:",e+=i>0?(i>9?i:"0"+i)+":":"00:",e+=t>0?t>9?t:"0"+t:"00"}}),e.exports=o},{"./util":6}],3:[function(t,e){var n=t("./util"),o=t("./layout"),r=t("./stopwords"),i=t("./logger"),s=!0,h=function(t){this._logger=new i(s),this._words={},this._stopWords={},this._canvas=null,this._width=null,this._height=null,this._backgroundFill=null,this._onWordOver=null,this._onWordOut=null,this._onWordClick=null,this._layout=null,n.extend(this,t)};h.prototype=n.extend(h.prototype,{canvas:function(t){return t?(this._canvas=t,this._width=t.width,this._height=t.height,this):this._canvas},width:function(t){return t?(this._canvas&&(this._canvas.width=t,this._width=t),this):this.width},height:function(t){return t?(this._canvas&&(this._canvas.height=t,this._height=t),this):this._height},text:function(t){var e=t.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,"");this._filters&&this._filters.forEach(function(n){e=t.replace(n,"")});var n=e.split(" ");return this.words(n),this},textFilters:function(t){return t?(this._filters=t,this):this._filters},stop:function(t){if(t){var e=this;return t.forEach(function(t){e._stopWords[t.trim().toLowerCase()]=!0}),this}return this._stopWords},clear:function(){var t=this._canvas.getContext("2d");t.fillStyle=this._backgroundFill||"white",t.fillRect(0,0,this._canvas.width,this._canvas.height)},background:function(t){return t?(this._backgroundFill=t,this):this._backgroundFill},words:function(t){if(t){var e=this;return 0===Object.keys(this._stopWords).length&&this.stop(r.English),t.forEach(function(t){var n=t.trim().toLowerCase();if(!e._stopWords[n]&&""!==n){var o=e._words[n];o||(o=0),o++,e._words[n]=o}}),this}return this._words},onWordOver:function(t){return this._onWordOver=t,this},onWordOut:function(t){return this._onWordOut=t,this},onWordClick:function(t){return this._onWordClick=t,this},font:function(t){return t?(this._font=t,this):this._font},minFontSize:function(t){return t?(this._minFontSize=t,this):this._minFontSize},maxFontSize:function(t){return t?(this._maxFontSize=t,this):this._maxFontSize},maxWords:function(t){return void 0!==t?(this._maxWords=t,this):this._maxWords},color:function(t){return t?(this._color=t,this):this._color},generate:function(){var t={};this.debug&&(t.debug=!0),this._font&&(t.font=this._font),this._minFontSize&&(t.minFontSize=this._minFontSize),this._maxFontSize&&(t.maxFontSize=this._maxFontSize),void 0!==this._maxWords&&(t.maxWords=this._maxWords),this._logger.push("Layout"),this._layout=new o(t).canvas(this._canvas).words(this._words).onWordOver(this._onWordOver).onWordOut(this._onWordOut).onWordClick(this._onWordClick),this._logger.pop();var e=this._layout.layout(),n=this._canvas.getContext("2d");n.fillStyle=this._backgroundFill||"white",n.fillRect(0,0,this._width,this._height),this._logger.push("Render");var r=this;return Object.keys(e).forEach(function(t){var o=e[t];if(-1!==o.x&&-1!==o.y){n.font=o.fontSize+"px "+o.fontFamily;var i="black";if(r._color)if(r._color instanceof Array){var s=Math.floor(Math.random()*r._color.length);i=r._color[s]}else i=r._color instanceof Function?r._color(e[t]):r._color;n.fillStyle=i,n.fillText(t,o.x,o.y),r.debug&&(n.strokeStyle="green",n.strokeRect(o.x+o.bb.offsetX,o.y+o.bb.offsetY,o.bb.width,o.bb.height))}}),this._logger.pop(),this},save:function(t,e){var n=this._canvas.toDataURL(t||"image/png"),o=n.indexOf(",");n=n.substring(o);var r=document.createElement("a");r.href="data:application/octet-stream;base64"+n,e&&(r.download=e),r.click()}}),e.exports=h},{"./layout":1,"./logger":2,"./stopwords":4,"./util":6}],4:[function(t,e,n){var o="a, about, above, across, after, again, against, all, almost, alone, along, already, also, although, always, am, among, an, and, another, any, anybody, anyone, anything, anywhere, are, area, areas, aren't, around, as, ask, asked, asking, asks, at, away, b, back, backed, backing, backs, be, became, because, become, becomes, been, before, began, behind, being, beings, below, best, better, between, big, both, but, by, c, came, can, cannot, can't, case, cases, certain, certainly, clear, clearly, come, could, couldn't, d, did, didn't, differ, different, differently, do, does, doesn't, doing, done, don't, down, downed, downing, downs, during, e, each, early, either, end, ended, ending, ends, enough, even, evenly, ever, every, everybody, everyone, everything, everywhere, f, face, faces, fact, facts, far, felt, few, find, finds, first, for, four, from, full, fully, further, furthered, furthering, furthers, g, gave, general, generally, get, gets, give, given, gives, go, going, good, goods, got, great, greater, greatest, group, grouped, grouping, groups, h, had, hadn't, has, hasn't, have, haven't, having, he, he'd, he'll, her, here, here's, hers, herself, he's, high, higher, highest, him, himself, his, how, however, how's, i, i'd, if, i'll, i'm, important, in, interest, interested, interesting, interests, into, is, isn't, it, its, it's, itself, i've, j, just, k, keep, keeps, kind, knew, know, known, knows, l, large, largely, last, later, latest, least, less, let, lets, let's, like, likely, long, longer, longest, m, made, make, making, man, many, may, me, member, members, men, might, more, most, mostly, mr, mrs, much, must, mustn't, my, myself, n, necessary, need, needed, needing, needs, never, new, newer, newest, next, no, nobody, non, noone, nor, not, nothing, now, nowhere, number, numbers, o, of, off, often, old, older, oldest, on, once, one, only, open, opened, opening, opens, or, order, ordered, ordering, orders, other, others, ought, our, ours, ourselves, out, over, own, p, part, parted, parting, parts, per, perhaps, place, places, point, pointed, pointing, points, possible, present, presented, presenting, presents, problem, problems, put, puts, q, quite, r, rather, really, right, room, rooms, s, said, same, saw, say, says, second, seconds, see, seem, seemed, seeming, seems, sees, several, shall, shan't, she, she'd, she'll, she's, should, shouldn't, show, showed, showing, shows, side, sides, since, small, smaller, smallest, so, some, somebody, someone, something, somewhere, state, states, still, such, sure, t, take, taken, than, that, that's, the, their, theirs, them, themselves, then, there, therefore, there's, these, they, they'd, they'll, they're, they've, thing, things, think, thinks, this, those, though, thought, thoughts, three, through, thus, to, today, together, too, took, toward, turn, turned, turning, turns, two, u, under, until, up, upon, us, use, used, uses, v, very, w, want, wanted, wanting, wants, was, wasn't, way, ways, we, we'd, well, we'll, wells, went, were, we're, weren't, we've, what, what's, when, when's, where, where's, whether, which, while, who, whole, whom, who's, whose, why, why's, will, with, within, without, won't, work, worked, working, works, would, wouldn't, x, y, year, years, yes, yet, you, you'd, you'll, young, younger, youngest, your, you're, yours, yourself, yourselves, you've, z",r=o.split(",");n.English=r},{}],5:[function(t,e){var n=t("./util"),o=function(t){this._context=null,n.extend(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=this.width||640,this._canvas.height=this.height||480,this._context=this._canvas.getContext("2d"),this.debug&&document.body.appendChild(this._canvas),this._bitmap=n.createArray(this._canvas.width,this._canvas.height);for(var e=0;e<this._canvas.width;e++)for(var o=0;o<this._canvas.height;o++)this._bitmap[e][o]=!1};o.prototype=n.extend(o.prototype,{create:function(t,e,o){var r=this._context;r.fillStyle="black",r.fillRect(0,0,this._canvas.width,this._canvas.height);var i=5,s=Math.floor(this._canvas.height/2);r.fillStyle="white",r.font=e+"px "+o,r.fillText(t,i,s);for(var h=r.measureText(t).width,a=i,l=s-e-2,u=a+h+i,d=l+e+.5*e,f=r.getImageData(a,l,u-a,d-l),c=n.createArray(f.width,f.height),g=0,_=0,v=0;v<f.data.length;v+=4)c[g][_]=0!==f.data[v],g++,g===f.width&&(g=0,_++);var w=Number.MAX_VALUE,m=Number.MAX_VALUE,y=-Number.MAX_VALUE,p=-Number.MAX_VALUE;for(g=0;g<c.length;g++)for(_=0;_<c[g].length;_++)c[g][_]&&(w=Math.min(w,g),m=Math.min(m,_),y=Math.max(y,g),p=Math.max(p,_));var b=n.createArray(y-w,p-m);for(g=0;y-w>g;g++)for(_=0;p-m>_;_++)b[g][_]=c[w+g][m+_];this.debug&&(r.strokeStyle="yellow",r.strokeRect(a,l,u-a,d-l)),r.strokeStyle="red",r.strokeRect(i,s,this._canvas.width,this._canvas.height);var x=y-w,k=p-m,W=-(i-(a+w)),S=-(s-(l+m));this.debug&&(r.strokeStyle="green",r.strokeRect(i+W,s+S,x,k));var O={bb:{offsetX:W,offsetY:S,width:x,height:k},bitmap:b,fontSize:e,fontFamily:o};return O},fits:function(t,e){for(var n=t.x+t.bb.offsetX,o=t.y+t.bb.offsetY,r=e.length,i=e[0].length,s=0>n||0>o,h=!1,a=s||h,l=0;l<t.bb.width&&!a;l++)for(var u=n+l,d=0;d<t.bb.height&&!a;d++){var f=o+d;u>=r||f>=i?s=!0:e[u][f]&&(h=!0),a=s||h}return!a}}),e.exports=o},{"./util":6}],6:[function(t,e){var n={extend:function(t){var e,n,o;for(n=1;n<arguments.length;n++){o=arguments[n];for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},lerp:function(t,e,n){return t+n*(e-t)},step:function(t,e,n){return Math.round(this.lerp(t,e,n))},createArray:function(t){var e=new Array(t||0),n=t;if(arguments.length>1)for(var o=Array.prototype.slice.call(arguments,1);n--;)e[t-1-n]=this.createArray.apply(this,o);return e}};e.exports=n},{}]},{},[3])(3)});