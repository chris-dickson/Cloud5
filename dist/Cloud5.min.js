!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Cloud5=t()}}(function(){return function t(e,i,s){function n(r,h){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!h&&a)return a(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e){var i=t("./util"),s=t("./textbitmap"),n=function(t){this._canvas=null,this._words=null,this._bitmap=null,this._renderInfo=null,this._textBitmapper=null,i.extend(this,t)};n.prototype=i.extend(n.prototype,{_initialize:function(){var t={width:this._canvas.width,height:this._canvas.height};this.debug&&(t.debug=!0),this._textBitmapper=new s(t),this._renderInfo={},this._bitmap=i.createArray(this._canvas.width,this._canvas.height);for(var e=0;e<this._canvas.width;e++)for(var n=0;n<this._canvas.height;n++)this._bitmap[e][n]=!1},_hit:function(t,e){var i=null,s=this,n=Object.keys(this._renderInfo).filter(function(i){var n=s._renderInfo[i],o=n.x+n.bb.offsetX,r=n.y+n.bb.offsetY,h=o+n.bb.width,a=r+n.bb.height;return t>=o&&h>=t&&e>=r&&a>=e?!0:!1});return n.sort(function(t,e){var i=s._renderInfo[t].bb,n=s._renderInfo[e].bb,o=i.width*i.height,r=n.width*n.height;return o-r}),n.length>0&&(i=n[0]),i},canvas:function(t){return t?(this._canvas=t,this):this._canvas},words:function(t){return t?(this._words=t,this):this._words},layouter:function(t){return this._layouter=t,this},onWordOver:function(t){return this._onWordOver=t,this},onWordOut:function(t){return this._onWordOut=t,this},onWordClick:function(t){return this._onWordClick=t,this},place:function(t,e){for(var i=e.bitmap.length,s=e.bitmap[0].length,n=0;i>n;n++)for(var o=0;s>o;o++){var r=e.x+e.bb.offsetX+n,h=e.y+e.bb.offsetY+o;e.bitmap[n][o]&&(this._bitmap[r][h]=t)}},fits:function(t){return this._textBitmapper.fits(t,this._bitmap)},randomLayout:function(t,e,i,s){var n=this;t.forEach(function(t){var o=!1,r=100;this.debug&&n.debugDrawAll();for(var h=e[t];!o&&r>0;){var a=Math.floor(Math.random()*i),l=Math.floor(Math.random()*s);h.x=a,h.y=l,n.fits(h)?(o=!0,n.place(t,h)):r--}o||(h.x=-1,h.y=-1)})},debugDrawAll:function(){var t=this._canvas.getContext("2d");t.clearRect(0,0,this._canvas.width,this._canvas.height);var e=this;Object.keys(this._renderInfo).forEach(function(i){var s=e._renderInfo[i];void 0!==s.x&&-1!==s.x&&void 0!==s.y&&-1!==s.y&&(t.font=s.fontSize+"px "+s.fontFamily,t.fillStyle="red",t.strokeStyle="green",t.fillText(i,s.x,s.y),t.strokeRect(s.x+s.bb.offsetX,s.y+s.bb.offsetY,s.bb.width,s.bb.height))})},layout:function(){function t(t){var e=t.offsetX,i=t.offsetY,n=window.devicePixelRatio;e*=n,i*=n;var o=s._hit(e,i);o?(y&&(s._onWordOut&&s._onWordOut(y,t),y=null),s._onWordOver&&s._onWordOver(o,t),y=o):(s._onWordOut&&s._onWordOut(y,t),y=null)}function e(t){var e=t.offsetX,i=t.offsetY,n=window.devicePixelRatio;e*=n,i*=n;var o=s._hit(e,i);o&&s._onWordClick&&s._onWordClick(o,t)}if(this._initialize(),this._renderInfo={},this._words){var s=this,n=Number.MAX_VALUE,o=0;Object.keys(this._words).forEach(function(t){n=Math.min(s._words[t],n),o=Math.max(s._words[t],o)});var r=Object.keys(this._words).sort(function(t,e){return s._words[e]-s._words[t]});this.maxWords>0&&r.length>this.maxWords&&(r=r.splice(0,this.maxWords));var h=this.minFontSize||10,a=this.maxFontSize||200;r.forEach(function(t){var e=(s._words[t]-n)/(o-n),r=i.step(h,a,e),l=s._textBitmapper.create(t,r,s.font||"Calibri");s._renderInfo[t]=l,s._renderInfo[t].count=s._words[t],s._renderInfo[t].minCount=n,s._renderInfo[t].maxCount=o})}if(this.maskCanvas){for(var l=this.maskCanvas.width,u=this.maskCanvas.height,d=this.maskCanvas.getContext("2d"),c=d.getImageData(0,0,l,u),f=0,g=0,_=0;_<this._canvas.width;_++)for(var v=0;v<this._canvas.height;v++)this._bitmap[_][v]=!0;for(var m=0;m<c.data.length;m+=4){var w=c.data[m+3]>0;w&&f<this._canvas.width&&g<this._canvas.height&&(this._bitmap[f][g]=!1),f++,f===l&&(f=0,g++)}}this._layouter?this._layouter.call(this,r,s._renderInfo,this._canvas.width,this._canvas.height,this.fits,this.place):this.randomLayout(r,s._renderInfo,this._canvas.width,this._canvas.height);var y=null;return this._canvas.onmousemove=t,this._canvas.onclick=e,s._renderInfo}}),e.exports=n},{"./textbitmap":5,"./util":6}],2:[function(t,e){var i=t("./util"),s=function(t){this.writeLog=t,this.logs=[]};s.prototype=i.extend(s.prototype,{push:function(t){this.writeLog&&this.logs.push({label:t,time:Date.now()})},pop:function(){if(this.writeLog){for(var t=this.logs.length,e=this.logs.pop(),i="",s=0;s<t.length;s++)i+="	";var n=Date.now(),o=n-e.time;i+=e.label+":"+o+"ms",console.log(i)}},_millisecondsToString:function(t){var e,i=36e5,s=6e4,n=1e3,o=0,r=0,h=0;return t>=i&&(h=Math.floor(t/i)),t=h>0?t-h*i:t,t>=s&&(r=Math.floor(t/s)),t=r>0?t-r*s:t,t>=n&&(o=Math.floor(t/n)),t=o>0?t-o*n:t,e=h>0?(h>9?h:"0"+h)+":":"00:",e+=r>0?(r>9?r:"0"+r)+":":"00:",e+=o>0?(o>9?o:"0"+o)+":":"00:",e+=t>0?t>9?t:"0"+t:"00"}}),e.exports=s},{"./util":6}],3:[function(t,e){var i=t("./util"),s=t("./layout"),n=t("./stopwords"),o=t("./logger"),r=!1,h=function(t){this._logger=new o(r),this._words={},this._stopWords={},this._canvas=null,this._highlightCanvas=null,this._highlightedWords=null,this._width=null,this._height=null,this._backgroundFill=null,this._onWordOver=null,this._onWordOut=null,this._onWordClick=null,this._layout=null,this._layouter=null,this._renderInfo=null,i.extend(this,t)};h.prototype=i.extend(h.prototype,{canvas:function(t){if(t){if(t===this._canvas)return this;var e=window.devicePixelRatio,i=t.width,s=t.height,n=i,o=s;return e>1&&(i*=e,s*=e),this._highlightedWords={},this._renderInfo={},this._canvas=t,this._canvas.width=i,this._canvas.height=s,this._canvas.style.width=n+"px",this._canvas.style.height=o+"px;",this._width=i,this._height=s,this._highlightCanvas=document.createElement("canvas"),this._highlightCanvas.width=this._canvas.width,this._highlightCanvas.height=this._canvas.height,this._highlightCanvas.style.width=this._canvas.style.width,this._highlightCanvas.style.height=this._canvas.style.height,this._highlightCanvas.style.position="absolute",this._highlightCanvas.style.pointerEvents="none",this._highlightCanvas.style.top=this._canvas.getBoundingClientRect().top,this._highlightCanvas.style.left=this._canvas.getBoundingClientRect().left,this._canvas.parentNode.insertBefore(this._highlightCanvas,this._canvas),this}return this._canvas},width:function(t){return t?(this.resize(t),this):this.width},height:function(t){return t?(this._canvas&&this.resize(void 0,t),this):this._height},resize:function(t,e){var i=window.devicePixelRatio;return t&&(this._canvas.width=i*t,this._canvas.style.width=t+"px",this._width=i*t,this._highlightCanvas&&(this._highlightCanvas.width=this._canvas.width,this._highlightCanvas.style.width=this._canvas.style.width)),e&&(this._canvas.height=i*e,this._canvas.style.height=e+"px",this._height=i*e,this._highlightCanvas&&(this._highlightCanvas.height=this._canvas.height,this._highlightCanvas.style.height=this._canvas.style.height)),this},text:function(t){var e=t.replace(/[\.,-\/#!?$%\^&\*;:{}=\-_`~()]/g,"");this._filters&&this._filters.forEach(function(i){e=t.replace(i,"")});var i=e.split(" ");return this.words(i),this},mask:function(t,e){var i=new Image;i.src=t;var s=this;return i.onload=function(){var t=i.width,n=i.height;s.resize(t,n),s._maskCanvas=document.createElement("canvas"),s._maskCanvas.width=t,s._maskCanvas.height=n;var o=s._maskCanvas.getContext("2d");o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,s._maskCanvas.width,s._maskCanvas.height),o.drawImage(i,0,0),e()},this},textFilters:function(t){return t?(this._filters=t,this):this._filters},stop:function(t){if(t){var e=this;return t.forEach(function(t){e._stopWords[t.trim().toLowerCase()]=!0}),this}return this._stopWords},clear:function(){var t=this._canvas.getContext("2d");t.fillStyle=this._backgroundFill||"white",t.fillRect(0,0,this._width,this._height)},background:function(t){return t?(this._backgroundFill=t,this):this._backgroundFill},words:function(t){if(t){var e=this;return 0===Object.keys(this._stopWords).length&&this.stop(n.English),t.forEach(function(t){var i=t.trim().toLowerCase();if(!e._stopWords[i]&&""!==i){var s=e._words[i];s||(s=0),s++,e._words[i]=s}}),this}return this._words},wordMap:function(t){if(t){var e=this;return Object.keys(t).forEach(function(i){var s=i.trim().toLowerCase();if(!e._stopWords[s]&&""!==s){var n=t[s]?t[s]:1;e._words[s]=n}}),this}return this._words},highlight:function(t,e){t instanceof Array==!1&&(t=[t]);var i=this;t.forEach(function(t){i._highlightedWords[t]=e}),this._updateHightlight()},unhighlight:function(t){if(t){t instanceof Array==!1&&(t=[t]);var e=this;t.forEach(function(t){delete e._highlightedWords[t]})}else this._highlightedWords={};this._updateHightlight()},_updateHightlight:function(){var t=this,e=this._highlightCanvas.getContext("2d");e.clearRect(0,0,this._highlightCanvas.width,this._highlightCanvas.height),Object.keys(this._highlightedWords).forEach(function(i){var s=t._renderInfo[i],n=t._highlightedWords[i];s&&(e.fillStyle=n,e.font=s.fontSize+"px "+s.fontFamily,e.fillText(i,s.x,s.y))})},onWordOver:function(t){return this._onWordOver=t,this},onWordOut:function(t){return this._onWordOut=t,this},onWordClick:function(t){return this._onWordClick=t,this},font:function(t){return t?(this._font=t,this):this._font},minFontSize:function(t){return t?(this._minFontSize=t,this):this._minFontSize},maxFontSize:function(t){return t?(this._maxFontSize=t,this):this._maxFontSize},maxWords:function(t){return void 0!==t?(this._maxWords=t,this):this._maxWords},color:function(t){return t?(this._color=t,this):this._color},layout:function(t){return this._layouter=t,this},generate:function(){var t={};this.debug&&(t.debug=!0),this._font&&(t.font=this._font),this._minFontSize&&(t.minFontSize=this._minFontSize),this._maxFontSize&&(t.maxFontSize=this._maxFontSize),void 0!==this._maxWords&&(t.maxWords=this._maxWords),this._maskCanvas&&(t.maskCanvas=this._maskCanvas),this._logger.push("Layout"),this._layout=new s(t).canvas(this._canvas).words(this._words).layouter(this._layouter).onWordOver(this._onWordOver).onWordOut(this._onWordOut).onWordClick(this._onWordClick),this._logger.pop(),this._renderInfo=this._layout.layout(),this.clear();var e=this._canvas.getContext("2d");this._logger.push("Render");var i=this;return Object.keys(this._renderInfo).forEach(function(t){var s=i._renderInfo[t];if(-1!==s.x&&-1!==s.y){e.font=s.fontSize+"px "+s.fontFamily;var n="black";if(i._color)if(i._color instanceof Array){var o=Math.floor(Math.random()*i._color.length);n=i._color[o]}else n=i._color instanceof Function?i._color(s,t):i._color;e.fillStyle=n,e.fillText(t,s.x,s.y),i.debug&&(e.strokeStyle="green",e.strokeRect(s.x+s.bb.offsetX,s.y+s.bb.offsetY,s.bb.width,s.bb.height))}}),this._logger.pop(),this},save:function(t,e){var i=this._canvas.toDataURL(t||"image/png"),s=i.indexOf(",");i=i.substring(s);var n=document.createElement("a");n.href="data:application/octet-stream;base64"+i,e&&(n.download=e),n.click()}}),e.exports=h,e.exports.Stopwords=n},{"./layout":1,"./logger":2,"./stopwords":4,"./util":6}],4:[function(t,e,i){var s="a, about, above, across, after, again, against, all, almost, alone, along, already, also, although, always, am, among, an, and, another, any, anybody, anyone, anything, anywhere, are, area, areas, aren't, around, as, ask, asked, asking, asks, at, away, b, back, backed, backing, backs, be, became, because, become, becomes, been, before, began, behind, being, beings, below, best, better, between, big, both, but, by, c, came, can, cannot, can't, case, cases, certain, certainly, clear, clearly, come, could, couldn't, d, did, didn't, differ, different, differently, do, does, doesn't, doing, done, don't, down, downed, downing, downs, during, e, each, early, either, end, ended, ending, ends, enough, even, evenly, ever, every, everybody, everyone, everything, everywhere, f, face, faces, fact, facts, far, felt, few, find, finds, first, for, four, from, full, fully, further, furthered, furthering, furthers, g, gave, general, generally, get, gets, give, given, gives, go, going, good, goods, got, great, greater, greatest, group, grouped, grouping, groups, h, had, hadn't, has, hasn't, have, haven't, having, he, he'd, he'll, her, here, here's, hers, herself, he's, high, higher, highest, him, himself, his, how, however, how's, i, i'd, if, i'll, i'm, important, in, interest, interested, interesting, interests, into, is, isn't, it, its, it's, itself, i've, j, just, k, keep, keeps, kind, knew, know, known, knows, l, large, largely, last, later, latest, least, less, let, lets, let's, like, likely, long, longer, longest, m, made, make, making, man, many, may, me, member, members, men, might, more, most, mostly, mr, mrs, much, must, mustn't, my, myself, n, necessary, need, needed, needing, needs, never, new, newer, newest, next, no, nobody, non, noone, nor, not, nothing, now, nowhere, number, numbers, o, of, off, often, old, older, oldest, on, once, one, only, open, opened, opening, opens, or, order, ordered, ordering, orders, other, others, ought, our, ours, ourselves, out, over, own, p, part, parted, parting, parts, per, perhaps, place, places, point, pointed, pointing, points, possible, present, presented, presenting, presents, problem, problems, put, puts, q, quite, r, rather, really, right, room, rooms, s, said, same, saw, say, says, second, seconds, see, seem, seemed, seeming, seems, sees, several, shall, shan't, she, she'd, she'll, she's, should, shouldn't, show, showed, showing, shows, side, sides, since, small, smaller, smallest, so, some, somebody, someone, something, somewhere, state, states, still, such, sure, t, take, taken, than, that, that's, the, their, theirs, them, themselves, then, there, therefore, there's, these, they, they'd, they'll, they're, they've, thing, things, think, thinks, this, those, though, thought, thoughts, three, through, thus, to, today, together, too, took, toward, turn, turned, turning, turns, two, u, under, until, up, upon, us, use, used, uses, v, very, w, want, wanted, wanting, wants, was, wasn't, way, ways, we, we'd, well, we'll, wells, went, were, we're, weren't, we've, what, what's, when, when's, where, where's, whether, which, while, who, whole, whom, who's, whose, why, why's, will, with, within, without, won't, work, worked, working, works, would, wouldn't, x, y, year, years, yes, yet, you, you'd, you'll, young, younger, youngest, your, you're, yours, yourself, yourselves, you've, z",n="alors,au,aucuns,aussi,autre,avant,avec,avoir,bon,car,ce,cela,ces,ceux,chaque,ci,comme,comment,dans,des,du,dedans,dehors,depuis,devrait,doit,donc,dos,début,elle,elles,en,encore,essai,est,et,eu,fait,faites,fois,font,hors,ici,il,ils,je,juste,la,le,les,leur,là,ma,maintenant,mais,mes,mine,moins,mon,mot,même,ni,nommés,notre,nous,ou,où,par,parce,pas,peut,peu,plupart,pour,pourquoi,quand,que,quel,quelle,quelles,quels,qui,sa,sans,ses,seulement,si,sien,son,sont,sous,soyez, sujet,sur,ta,tandis,tellement,tels,tes,ton,tous,tout,trop,très,tu,voient,vont,votre,vous,vu,ça,étaient,état,étions,été,être,de,un,i,qu,d,l,ne,se,une,n,s,m,plus,à,'un,'il,'est,lui,mme,avait,c,-,--,---,me,j,?",o=s.split(","),r=n.split(",");i.English=o,i.French=r},{}],5:[function(t,e){var i=t("./util"),s=function(t){this._context=null,i.extend(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=this.width||640,this._canvas.height=this.height||480,this._context=this._canvas.getContext("2d"),this.debug&&document.body.appendChild(this._canvas),this._bitmap=i.createArray(this._canvas.width,this._canvas.height);for(var e=0;e<this._canvas.width;e++)for(var s=0;s<this._canvas.height;s++)this._bitmap[e][s]=!1};s.prototype=i.extend(s.prototype,{create:function(t,e,s){var n=this._context;n.fillStyle="black",n.fillRect(0,0,this._canvas.width,this._canvas.height);var o=5,r=Math.floor(this._canvas.height/2);n.fillStyle="white",n.font=e+"px "+s,n.fillText(t,o,r);for(var h=n.measureText(t).width,a=o,l=r-e-2,u=a+h+o,d=l+e+.5*e,c=n.getImageData(a,l,u-a,d-l),f=i.createArray(c.width,c.height),g=0,_=0,v=0;v<c.data.length;v+=4)f[g][_]=0!==c.data[v],g++,g===c.width&&(g=0,_++);var m=Number.MAX_VALUE,w=Number.MAX_VALUE,y=-Number.MAX_VALUE,p=-Number.MAX_VALUE;for(g=0;g<f.length;g++)for(_=0;_<f[g].length;_++)f[g][_]&&(m=Math.min(m,g),w=Math.min(w,_),y=Math.max(y,g),p=Math.max(p,_));var b=i.createArray(y-m,p-w);for(g=0;y-m>g;g++)for(_=0;p-w>_;_++)b[g][_]=f[m+g][w+_];this.debug&&(n.strokeStyle="yellow",n.strokeRect(a,l,u-a,d-l)),n.strokeStyle="red",n.strokeRect(o,r,this._canvas.width,this._canvas.height);var x=y-m,k=p-w,C=-(o-(a+m)),W=-(r-(l+w));this.debug&&(n.strokeStyle="green",n.strokeRect(o+C,r+W,x,k));var S={bb:{offsetX:C,offsetY:W,width:x,height:k},bitmap:b,fontSize:e,fontFamily:s};return S},fits:function(t,e){t.x=Math.floor(t.x),t.y=Math.floor(t.y);for(var i=t.x+t.bb.offsetX,s=t.y+t.bb.offsetY,n=e.length,o=e[0].length,r=0>i||0>s,h=!1,a=r||h,l=0;l<t.bb.width&&!a;l++)for(var u=i+l,d=0;d<t.bb.height&&!a;d++){var c=s+d;u>=n||c>=o?r=!0:e[u][c]&&(h=!0),a=r||h}return!a}}),e.exports=s},{"./util":6}],6:[function(t,e){var i={extend:function(t){var e,i,s;for(i=1;i<arguments.length;i++){s=arguments[i];for(e in s)s.hasOwnProperty(e)&&(t[e]=s[e])}return t},lerp:function(t,e,i){return t+i*(e-t)},step:function(t,e,i){return Math.round(this.lerp(t,e,i))},createArray:function(t){var e=new Array(t||0),i=t;if(arguments.length>1)for(var s=Array.prototype.slice.call(arguments,1);i--;)e[t-1-i]=this.createArray.apply(this,s);return e}};e.exports=i},{}]},{},[3])(3)});