!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.WordCloudCanvas=t()}}(function(){return function t(i,e,n){function r(s,h){if(!e[s]){if(!i[s]){var o="function"==typeof require&&require;if(!h&&o)return o(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=e[s]={exports:{}};i[s][0].call(u.exports,function(t){var e=i[s][1][t];return r(e?e:t)},u,u.exports,t,i,e,n)}return e[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,i){function e(t){var i=new Array(t||0),n=t;if(arguments.length>1)for(var r=Array.prototype.slice.call(arguments,1);n--;)i[t-1-n]=e.apply(this,r);return i}var n=t("./util"),r=t("./textbitmap"),a=function(t){this._canvas,this._words,this._textBitmapper,n.extend(this,t)};a.prototype=n.extend(a.prototype,{_initialize:function(){this._textBitmapper=new r,this._bitmap=e(this._canvas.width,this._canvas.height);for(var t=0;t<this._canvas.width;t++)for(var i=0;i<this._canvas.height;i++)this._bitmap[t][i]=!1},canvas:function(t){return t?(this._canvas=t,this):this._canvas},words:function(t){return t?(this._words=t,this):this._words},layout:function(){this._initialize();var t={};if(this._words){var i=this;Object.keys(this._words).forEach(function(e){var n=i._textBitmapper.create(e,20,"Calibri");t[e]=n})}return t}}),i.exports=a},{"./textbitmap":3,"./util":4}],2:[function(t,i,e){var n=t("./util"),r=t("./layout"),a=function(t){this._words={},this._stopWords={},this._canvas,this._width,this._height,this._backgroundFill,this._layout,n.extend(this,t)};a.prototype=n.extend(a.prototype,{canvas:function(t){return t?(this._canvas=t,this._width=t.width,this._height=t.height,this):this._canvas},width:function(t){return t?(this._canvas&&(this._canvas.width=t,this._width=t),this):this.width},height:function(t){return t?(this._canvas&&(this._canvas.height=t,this._height=t),this):this._height},text:function(t){var i=t.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,"");i=i.replace(/\[[0-9]*\]/g,""),i=i.replace(/[\t+\[\]]/g,"");var e=i.split(" ");return this.words(e),this},stop:function(t){if(t){var i=this;return t.forEach(function(t){i._stopWords[t.trim().toLowerCase()]=!0}),this}return this._stopWords},background:function(t){return t?(this._backgroundFill=t,this):this._backgroundFill},words:function(t){if(t){var i=this;return t.forEach(function(t){var e=t.trim().toLowerCase();if(!i._stopWords[e]&&""!==e){var n=i._words[e];n||(n=0),n++,i._words[e]=n}}),this}return this._words},generate:function(){var t=(new r).canvas(this._canvas).words(this._words),i=(t.layout(),this._canvas.getContext("2d"));return this._backgroundFill&&(i.fillStyle=this._backgroundFill,i.fillRect(0,0,this._width,this._height)),this}}),e.Extend=n.extend,e.WordCloud=a},{"./layout":1,"./util":4}],3:[function(t,i){function e(t){var i=new Array(t||0),n=t;if(arguments.length>1)for(var r=Array.prototype.slice.call(arguments,1);n--;)i[t-1-n]=e.apply(this,r);return i}var n=t("./util"),r=function(t){this._canvas,this._context,n.extend(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=640,this._canvas.height=480,this._context=this._canvas.getContext("2d"),document.body.appendChild(this._canvas),this._bitmap=e(this._canvas.width,this._canvas.height);for(var i=0;i<this._canvas.width;i++)for(var r=0;r<this._canvas.height;r++)this._bitmap[i][r]=!1};r.prototype=n.extend(r.prototype,{create:function(t,i,n){var r=this._context;r.fillStyle="black",r.fillRect(0,0,this._canvas.width,this._canvas.height);var a=5;r.fillStyle="white",r.font=i+"px "+n,r.fillText(t,a,this._canvas.height/2);for(var s=r.measureText(t).width,h=a,o=this._canvas.height/2-i-2,u=h+s+a,c=o+i+.5*i,f=r.getImageData(h,o,u-h,c-o),d=e(f.width,f.height),l=0,_=0,v=0;v<f.data.length;v+=4)d[l][_]=0!==f.data[v],l++,l===f.width&&(l=0,_++);for(var p=Number.MAX_VALUE,g=Number.MAX_VALUE,w=-Number.MAX_VALUE,m=-Number.MAX_VALUE,l=0;l<d.length;l++)for(var _=0;_<d[l].length;_++)d[l][_]&&(p=Math.min(p,l),g=Math.min(g,_),w=Math.max(w,l),m=Math.max(m,_));for(var x=e(w-p,m-g),l=p;w>l;l++)for(var _=g;g>_;_++)x[l][_]=d[l][_];var y={width:w-p,height:m-g,bitmap:x};return y},intersects:function(){}}),i.exports=r},{"./util":4}],4:[function(t,i){var e={extend:function(t){var i,e,n;for(e=1;e<arguments.length;e++){n=arguments[e];for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}};i.exports=e},{}]},{},[2])(2)});